<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <!-- Metatags para redes sociais -->
    <meta property="og:image" content="https://github.com/ProsperidadeQuantica/Mapa-Numerologia-Caldeu/blob/main/PROSPERIDADE%20QU%C3%82NTICA%20LOGO.png?raw=true">
    <meta property="og:title" content="Mapa Caldeu de Numerologia Completo">
    <meta property="og:description" content="Descubra seu mapa numerológico completo com base na numerologia caldeia.">
    <meta property="og:url" content="URL_DO_SEU_SITE_AQUI">

    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:image" content="URL_DA_IMAGEM_LOGO_AQUI">

    <title>Mapa Caldeu de Numerologia Completo</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Georgia', serif;
            background: linear-gradient(135deg, #1a1a2e, #16213e, #0f3460);
            color: #e8e8e8;
            min-height: 100vh;
            padding: 20px;
            line-height: 1.6;
        }

        .container {
            max-width: 900px;
            margin: 20px auto;
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        h1 {
            text-align: center;
            font-size: 2.3em;
            margin-bottom: 10px;
            background: linear-gradient(45deg, #ff66b2, #ff8cc6);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            text-shadow: 0 0 25px rgba(255, 105, 180, 0.3);
        }

        .subtitle {
            text-align: center;
            font-size: 1.1em;
            margin-bottom: 40px;
            color: #ff8cc6;
            font-style: italic;
        }

        .input-section, .results-section, .info-section {
            background: rgba(255, 255, 255, 0.03);
            padding: 25px;
            border-radius: 15px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            margin-bottom: 30px;
        }

        h2 {
            color: #ff66b2;
            margin-bottom: 25px;
            font-size: 1.6em;
            text-align: center;
            border-bottom: 1px solid rgba(255, 105, 180, 0.2);
            padding-bottom: 10px;
        }
        
        h3 {
            color: #ff8cc6;
            margin-top: 20px;
            margin-bottom: 10px;
            font-size: 1.3em;
        }
        
        h4 {
             color: #ff8cc6;
             margin-bottom: 8px;
             font-size: 1.1em;
        }

        .input-group {
            margin-bottom: 20px;
        }

        label {
            display: block;
            margin-bottom: 8px;
            color: #ff8cc6;
            font-weight: bold;
            font-size: 1.1em;
        }

        input[type="text"],
        input[type="date"] {
            width: 100%;
            padding: 12px;
            border: 2px solid rgba(255, 105, 180, 0.3);
            border-radius: 8px;
            background: rgba(255, 255, 255, 0.08);
            color: #e8e8e8;
            font-size: 1.1em;
            transition: border-color 0.3s ease, box-shadow 0.3s ease;
            font-family: 'Georgia', serif;
        }

        input[type="text"]:focus,
        input[type="date"]:focus {
            outline: none;
            border-color: #ff66b2;
            box-shadow: 0 0 15px rgba(255, 105, 180, 0.3);
        }
        
        input[type="date"] {
            appearance: none;
            -webkit-appearance: none;
            position: relative;
            color-scheme: dark;
        }
        
        input[type="date"]::before {
            content: attr(placeholder);
            position: absolute;
            color: #aaa;
            left: 12px;
            top: 12px;
            width: calc(100% - 40px);
        }
        
        input[type="date"]:focus::before, 
        input[type="date"]:valid::before {
             display: none;
        }

        .calculate-button {
            display: block;
            width: 100%;
            padding: 15px;
            background: linear-gradient(45deg, #ff66b2, #e64a9f);
            color: white;
            border: none;
            border-radius: 10px;
            font-size: 1.2em;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-top: 10px;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.3);
        }

        .calculate-button:hover {
            background: linear-gradient(45deg, #e64a9f, #ff66b2);
            box-shadow: 0 8px 20px rgba(255, 105, 180, 0.3);
            transform: translateY(-2px);
        }

        .result-block {
            background: rgba(255, 105, 180, 0.08);
            border: 1px solid rgba(255, 105, 180, 0.2);
            border-left: 5px solid #ff66b2;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 25px;
        }

        .result-number {
            font-size: 2.8em;
            font-weight: bold;
            color: #ff66b2;
            margin-bottom: 5px;
            text-shadow: 0 0 15px rgba(255, 105, 180, 0.4);
        }
        
        .result-compound-number {
             font-size: 1.5em;
             font-weight: bold;
             color: #ff8cc6;
             margin-bottom: 10px;
        }

        .result-calculation {
            color: #c9c9c9;
            margin-bottom: 15px;
            font-size: 1em;
            word-wrap: break-word;
        }

        .interpretation {
            background: rgba(255, 255, 255, 0.04);
            border-radius: 8px;
            padding: 15px;
            margin-top: 15px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .interpretation h4 {
            color: #ff8cc6;
            margin-bottom: 8px;
            font-size: 1.1em;
        }
        
        .interpretation p {
            font-size: 1em;
            color: #e0e0e0;
        }

        .chaldean-table-container {
            margin-top: 30px;
        }

        .chaldean-table {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(50px, 1fr));
            gap: 8px;
            margin-top: 15px;
        }

        .letter-box {
            background: rgba(255, 105, 180, 0.1);
            border: 1px solid rgba(255, 105, 180, 0.3);
            border-radius: 8px;
            padding: 10px 5px;
            text-align: center;
            transition: all 0.3s ease;
        }

        .letter-box:hover {
            background: rgba(255, 105, 180, 0.2);
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(255, 105, 180, 0.2);
        }

        .letter {
            font-size: 1.1em;
            font-weight: bold;
            color: #ff66b2;
        }

        .number {
            font-size: 0.9em;
            color: #e8e8e8;
            margin-top: 4px;
        }
        
        .energy-diagram-container {
            margin-top: 15px;
            padding: 15px;
            background: rgba(0,0,0,0.1);
            border-radius: 10px;
            border: 1px solid rgba(255, 105, 180, 0.2);
        }
        
        .energy-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 10px;
            max-width: 250px;
            margin: 15px auto;
        }
        
        .energy-cell {
            border: 1px solid rgba(255, 105, 180, 0.3);
            border-radius: 8px;
            padding: 15px 10px;
            text-align: center;
            background: rgba(255, 105, 180, 0.05);
            position: relative;
        }
        
        .energy-number {
            font-size: 1.4em;
            font-weight: bold;
            color: #ff8cc6;
        }
        
        .energy-count {
            font-size: 0.9em;
            color: #aaa;
            margin-top: 5px;
        }
        
        .energy-count-circles {
            position: absolute;
            bottom: 5px;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            gap: 2px;
        }
        
        .energy-count-circles span {
            display: inline-block;
            width: 6px;
            height: 6px;
            background-color: #ff66b2;
            border-radius: 50%;
            opacity: 0.7;
        }

        /* Estilos para os diferentes tipos de números */
        .lucky-numbers-grid {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin: 15px 0;
            justify-content: center;
        }

        /* NÚMEROS FAVORÁVEIS - Dourado */
        .favorable-number-item {
            background: linear-gradient(45deg, #ffd700, #ffed4e);
            color: #1a1a1a;
            font-weight: bold;
            font-size: 1.2em;
            padding: 12px 16px;
            border-radius: 50%;
            min-width: 50px;
            min-height: 50px;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 4px 15px rgba(255, 215, 0, 0.4);
            transition: all 0.3s ease;
        }

        .favorable-number-item:hover {
            transform: translateY(-3px) scale(1.1);
            box-shadow: 0 8px 25px rgba(255, 215, 0, 0.6);
        }

        /* NÚMEROS QUE SE HARMONIZAM - Verde */
        .harmonizing-number-item {
            background: linear-gradient(45deg, #00d4aa, #00b894);
            color: white;
            font-weight: bold;
            font-size: 1.2em;
            padding: 12px 16px;
            border-radius: 50%;
            min-width: 50px;
            min-height: 50px;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 4px 15px rgba(0, 212, 170, 0.3);
            transition: all 0.3s ease;
        }

        .harmonizing-number-item:hover {
            transform: translateY(-3px) scale(1.1);
            box-shadow: 0 8px 25px rgba(0, 212, 170, 0.5);
        }

        /* NÚMEROS INCOMPATÍVEIS - Vermelho */
        .incompatible-number-item {
            background: linear-gradient(45deg, #e74c3c, #c0392b);
            color: white;
            font-weight: bold;
            font-size: 1.2em;
            padding: 12px 16px;
            border-radius: 50%;
            min-width: 50px;
            min-height: 50px;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 4px 15px rgba(231, 76, 60, 0.3);
            transition: all 0.3s ease;
        }

        .incompatible-number-item:hover {
            transform: translateY(-3px) scale(1.1);
            box-shadow: 0 8px 25px rgba(231, 76, 60, 0.5);
        }

        /* Responsive adjustments */
        @media (max-width: 768px) {
            .container {
                padding: 20px;
            }
            h1 {
                font-size: 2em;
            }
            h2 {
                font-size: 1.4em;
            }
            .chaldean-table {
                grid-template-columns: repeat(auto-fit, minmax(45px, 1fr));
            }
        }
        
        @media (max-width: 480px) {
             h1 {
                font-size: 1.8em;
            }
             h2 {
                font-size: 1.3em;
            }
            .result-number {
                font-size: 2.5em;
            }
            .energy-grid {
                 max-width: 200px;
            }
            .energy-cell {
                 padding: 10px 5px;
            }
            .energy-number {
                 font-size: 1.2em;
            }
            .favorable-number-item, .harmonizing-number-item, .incompatible-number-item {
                min-width: 40px;
                min-height: 40px;
                font-size: 1em;
                padding: 8px 12px;
            }
        }

    </style>
</head>
<body>
    <div class="container">
        <h1>🔮 Mapa Caldeu de Numerologia Completo</h1>
        <p class="subtitle">Descubra as vibrações que moldam seu destino</p>

        <!-- Seção de Inputs -->
        <div class="input-section">
            <h2>📊 Insira seus Dados</h2>
            <div class="input-group">
                <label for="nameInput">Nome mais usado (ou palavra):</label>
                <input type="text" id="nameInput" placeholder="Ex: Maria Silva (sem acentos)">
                <p style="font-size: 0.8em; color: #ff8cc6; text-align: right; margin-top: 5px;">(Não use acentos)</p>
            </div>
            <div class="input-group">
                <label for="dobInput">Data de Nascimento:</label>
                <input type="date" id="dobInput" placeholder="dd/mm/aaaa">
            </div>
             <div class="input-group">
                <label for="fullNameInput">Nome Completo de Nascimento (Legal):</label>
                <input type="text" id="fullNameInput" placeholder="Ex: Maria da Silva Santos (sem acentos)">
                 <p style="font-size: 0.8em; color: #ff8cc6; text-align: right; margin-top: 5px;">(Necessário para Análise Energética)</p>
            </div>
            <button class="calculate-button" onclick="calculateAll()">Calcular Mapa Numerológico</button>
        </div>

        <!-- Seção de Resultados -->
        <div id="resultsSection" class="results-section" style="display: none;">
            <h2>✨ Seu Mapa Numerológico ✨</h2>
            
            <!-- Número de Destino (Data de Nascimento) -->
            <div id="destinyResult" class="result-block" style="display: none;"></div>

            <!-- Números Favoráveis, Harmonizantes e Incompatíveis -->
            <div id="numerologySection" style="display: none;">
                <h3>🔢 Análise Numerológica Carlos Rosa</h3>
                <div id="favorableNumbersResult" class="result-block"></div>
                <div id="harmonizingNumbersResult" class="result-block"></div>
                <div id="incompatibleNumbersResult" class="result-block"></div>
            </div>

            <!-- Números do Nome (Expressão, Alma, Personalidade) -->
            <div id="nameResults" style="display: none;">
                <h3>Numerologia do Nome: <span id="nameUsed"></span></h3>
                <div id="expressionResult" class="result-block"></div>
                <div id="soulUrgeResult" class="result-block"></div>
                <div id="personalityResult" class="result-block"></div>
            </div>

            <!-- Análise Energética (Nome Completo) -->
             <div id="energyAnalysisSection" style="display: none;">
                 <h3>Análise Energética do Nome Completo: <span id="fullNameUsed"></span></h3>
                 <div id="energyAnalysisResult" class="result-block">
                     <!-- O conteúdo será preenchido pela função displayEnergyAnalysis -->
                 </div>
            </div>

        </div>
        
        <!-- Seção Informativa -->
        <div class="info-section">
            <h2>📜 Sobre a Numerologia Caldeia</h2>
            <div id="educationalContent">
                <p>A Numerologia Caldeia é um sistema antigo que associa letras a números com base em suas vibrações sonoras. Acredita-se que ela revela insights profundos sobre a personalidade, o propósito de vida e os desafios de um indivíduo.</p>
                <h3>Tabela de Correspondências Caldeia</h3>
                 <div class="chaldean-table-container">
                     <div class="chaldean-table" id="chaldeanTable"></div>
                 </div>
                 <p style="font-size: 0.9em; margin-top: 10px;">Nota: O número 9 é considerado sagrado e não é atribuído a letras neste sistema, mas pode aparecer como resultado final de um cálculo.</p>
            </div>
        </div>

    </div>

    <script>
        // Tabela Caldeia
        const chaldeanValues = {
            'A': 1, 'B': 2, 'C': 3, 'D': 4, 'E': 5, 'F': 8, 'G': 3, 'H': 5, 'I': 1,
            'J': 1, 'K': 2, 'L': 3, 'M': 4, 'N': 5, 'O': 7, 'P': 8, 'Q': 1, 'R': 2,
            'S': 3, 'T': 4, 'U': 6, 'V': 6, 'W': 6, 'X': 5, 'Y': 1, 'Z': 7
        };
        
        // Tabela Pitagórica (para Análise Energética)
        const pythagoreanValues = {
            'A': 1, 'B': 2, 'C': 3, 'D': 4, 'E': 5, 'F': 6, 'G': 7, 'H': 8, 'I': 9,
            'J': 1, 'K': 2, 'L': 3, 'M': 4, 'N': 5, 'O': 6, 'P': 7, 'Q': 8, 'R': 9,
            'S': 1, 'T': 2, 'U': 3, 'V': 4, 'W': 5, 'X': 6, 'Y': 7, 'Z': 8
        };

        // TABELAS CORRETAS DO PDF CARLOS ROSA

        // NÚMEROS FAVORÁVEIS - Baseado na tabela da página 216-217 (DIA + MÊS)
        const favorableNumbers = {
            "1-1": [1,5], "1-2": [1,6], "1-3": [5,6], "1-4": [1,5], "1-5": [5,6], "1-6": [1,6], "1-7": [1,7], "1-8": [1,3], "1-9": [6,9], "1-10": [1,5],
            "1-11": [1,6], "1-12": [1,6], "1-13": [1,7], "1-14": [1,7], "1-15": [1,3], "1-16": [6,9], "1-17": [1,5], "1-18": [1,6], "1-19": [1,6], "1-20": [1,7],
            "1-21": [1,6], "1-22": [1,6], "1-23": [1,7], "1-24": [5,6], "1-25": [5,6], "1-26": [2,3], "1-27": [6,9], "1-28": [5,6], "1-29": [1,7], "1-30": [2,3], "1-31": [1,7],
            
            "2-1": [2,7], "2-2": [2,7], "2-3": [3,6], "2-4": [2,7], "2-5": [3,6], "2-6": [1,6], "2-7": [3,7], "2-8": [2,3], "2-9": [1,6], "2-10": [2,7],
            "2-11": [5,7], "2-12": [5,6], "2-13": [1,5], "2-14": [5,7], "2-15": [5,6], "2-16": [1,5], "2-17": [2,3], "2-18": [3,6], "2-19": [1,7], "2-20": [2,7],
            "2-21": [3,6], "2-22": [5,7], "2-23": [6,7], "2-24": [5,6], "2-25": [5,6], "2-26": [2,3], "2-27": [1,9], "2-28": [5,6], "2-29": [1,7],
            
            "3-1": [1,7], "3-2": [1,7], "3-3": [3,5], "3-4": [1,7], "3-5": [1,7], "3-6": [3,6], "3-7": [2,7], "3-8": [3,6], "3-9": [6,9], "3-10": [1,7],
            "3-11": [1,7], "3-12": [2,7], "3-13": [1,5], "3-14": [5,7], "3-15": [3,6], "3-16": [1,6], "3-17": [2,6], "3-18": [3,6], "3-19": [1,7], "3-20": [2,7],
            "3-21": [3,6], "3-22": [1,7], "3-23": [6,7], "3-24": [3,6], "3-25": [3,7], "3-26": [1,3], "3-27": [2,6], "3-28": [5,7], "3-29": [1,7], "3-30": [3,6], "3-31": [1,7],
            
            // Continuo com mais meses... (Esta é uma amostra)
            "4-1": [1,7], "4-2": [1,7], "4-3": [5,7], "4-4": [1,7], "4-5": [1,6], "4-6": [1,6], "4-7": [2,7], "4-8": [1,3], "4-9": [5,7], "4-10": [1,7],
            "4-11": [1,7], "4-12": [1,7], "4-13": [1,7], "4-14": [5,7], "4-15": [5,6], "4-16": [1,6], "4-17": [1,3], "4-18": [1,3], "4-19": [1,7], "4-20": [3,7],
            "4-21": [1,3], "4-22": [1,7], "4-23": [5,7], "4-24": [3,5], "4-25": [5,6], "4-26": [2,3], "4-27": [3,6], "4-28": [5,6], "4-29": [1,7], "4-30": [3,6],
            
            // Implementando um padrão para os outros meses (pode ser refinado)
            "5-1": [1,2], "5-2": [2,7], "5-3": [1,6], "5-4": [1,7], "5-5": [1,6], "5-6": [1,6], "5-7": [2,6], "5-8": [2,5], "5-9": [2,7], "5-10": [1,2],
        };

        // NÚMEROS QUE SE HARMONIZAM - Baseado no DIA DE NASCIMENTO (1-9)
        const harmonizingNumbersByDay = {
            1: [3,4,9],
            2: [1,2,3,4,5,6,7,8,9], // "todos os números são compatíveis"
            3: [2,4,6,7,9],
            4: [2,5,6,7,8,9],
            5: [2,4,5,7,8,9],
            6: [2,3,5,6,9],
            7: [2,4,5,7,8,9],
            8: [1,2,3,5,6,8,9],
            9: [1,2,3,5,6,8,9]
        };

        // NÚMEROS INCOMPATÍVEIS - Lista específica do PDF
        const incompatibleNumbersFixed = {
            1: [5,7],
            2: [4,8],
            3: [3,8],
            4: [1,6,8],
            5: [2,7,8],
            6: [1,4,7,8],
            7: [1,6,8],
            8: [1,2,3,5,6,8,9],
            9: [4,7] // Nota: O 9 tem poucos incompatíveis
        };

        // Interpretações
        const interpretations = {
            destiny: {
                1: "Seu caminho é de liderança, independência e inovação. Você está aqui para ser pioneiro e confiar em sua própria força.",
                2: "Seu caminho envolve cooperação, diplomacia e sensibilidade. Você está aqui para aprender a trabalhar em harmonia com os outros e construir pontes.",
                3: "Seu caminho é de criatividade, comunicação e expressão. Você está aqui para inspirar, alegrar e usar seus talentos artísticos.",
                4: "Seu caminho envolve estabilidade, trabalho árduo e organização. Você está aqui para construir bases sólidas e trazer ordem ao caos.",
                5: "Seu caminho é de liberdade, aventura e mudança. Você está aqui para experimentar a vida ao máximo e se adaptar a novas situações.",
                6: "Seu caminho envolve responsabilidade, serviço e cuidado com os outros. Você está aqui para nutrir, proteger e criar harmonia em seus relacionamentos e comunidade.",
                7: "Seu caminho é de introspecção, espiritualidade e busca pelo conhecimento. Você está aqui para explorar os mistérios da vida e confiar em sua intuição.",
                8: "Seu caminho envolve poder, ambição e sucesso material. Você está aqui para aprender a manifestar seus objetivos no mundo físico e usar sua autoridade com sabedoria.",
                9: "Seu caminho é de compaixão, humanitarismo e sabedoria universal. Você está aqui para servir a um propósito maior e inspirar os outros com sua generosidade.",
                11: "Número Mestre: Seu caminho é de iluminação espiritual, intuição elevada e inspiração. Você está aqui para ser um canal de consciência superior, mas pode enfrentar desafios nervosos.",
                22: "Número Mestre: Seu caminho é de construção em larga escala, combinando o idealismo com a praticidade. Você está aqui para manifestar grandes projetos que beneficiem a humanidade.",
                33: "Número Mestre: Seu caminho é de mestre curador, compaixão universal e serviço abnegado. Você está aqui para elevar a consciência e aliviar o sofrimento (raro como número final de destino)."
            },
            expression: {
                 1: "Você se expressa com liderança, originalidade e uma forte vontade. Pioneiro e determinado.",
                 2: "Sua expressão é cooperativa, diplomática e gentil. Busca harmonia e parcerias.",
                 3: "Você se expressa de forma criativa, comunicativa e otimista. Gosta de socializar e inspirar.",
                 4: "Sua expressão é prática, organizada e trabalhadora. Busca segurança e estabilidade.",
                 5: "Você se expressa com versatilidade, liberdade e curiosidade. Ama mudanças e novas experiências.",
                 6: "Sua expressão é responsável, protetora e voltada para a comunidade. Busca harmonia e cuidado.",
                 7: "Você se expressa de forma introspectiva, analítica e intuitiva. Busca conhecimento e profundidade.",
                 8: "Sua expressão é ambiciosa, poderosa e voltada para resultados. Busca sucesso material e autoridade.",
                 9: "Você se expressa com compaixão, idealismo e generosidade. Busca servir a humanidade.",
                 11: "Número Mestre: Sua expressão é inspiradora, intuitiva e carismática. Pode trazer iluminação, mas também tensão nervosa.",
                 22: "Número Mestre: Sua expressão é a de um construtor mestre, capaz de transformar sonhos em realidade prática em larga escala.",
                 33: "Número Mestre: Sua expressão é de mestre curador, compassiva e dedicada ao serviço altruísta (raro como número de expressão)."
            },
            compound: {
                10: "Roda da Fortuna: Potencial para sucesso ou queda, dependendo das ações. Carrega uma energia kármica de começos e fins.",
                11: "Força Oculta: Número mestre de grande intuição, inspiração, mas também tensão nervosa e provações.",
                12: "O Sacrifício: Indica ansiedade e sacrifício pelo bem dos outros. Aprendizado através das dificuldades.",
                13: "Transformação: Mudanças inesperadas e transformação. Poder de reconstrução após a destruição.",
                14: "Movimento e Comunicação: Risco em excessos, mas bom para comunicação e lidar com pessoas. Magnetismo.",
                15: "O Mago: Eloquência, carisma e sorte material, especialmente através de presentes ou legados. Cuidado com o lado sombrio.",
                16: "Torre Fulminada: Avisos de perigo, acidentes ou planos frustrados. Necessidade de cautela e planejamento.",
                19: "O Príncipe do Céu: Número altamente favorável, promete sucesso, felicidade e realização.",
                22: "O Construtor Mestre: Potencial para grandes realizações que beneficiam muitos, mas exige esforço e responsabilidade.",
            },
            soul: {
                1: "Sua alma anseia por independência, liderança e ser o número um.",
                2: "Sua alma busca harmonia, cooperação e relacionamentos pacíficos.",
                3: "Sua alma deseja se expressar criativamente, comunicar e sentir alegria.",
                4: "Sua alma anseia por estabilidade, segurança e ordem.",
                5: "Sua alma busca liberdade, aventura e variedade na vida.",
                6: "Sua alma deseja responsabilidade, cuidar dos outros e criar um lar harmonioso.",
                7: "Sua alma anseia por conhecimento, introspecção e conexão espiritual.",
                8: "Sua alma busca poder, sucesso material e controle sobre o ambiente.",
                9: "Sua alma deseja compaixão, servir à humanidade e ter um impacto amplo.",
                11: "Número Mestre: Sua alma tem um desejo profundo por iluminação espiritual e inspirar os outros.",
                22: "Número Mestre: Sua alma anseia por construir algo de valor duradouro para o mundo.",
                33: "Número Mestre: Sua alma tem um forte impulso para curar e servir desinteressadamente (raro)."
            },
            personality: {
                1: "Você aparenta ser independente, confiante e talvez um pouco autoritário.",
                2: "Você aparenta ser diplomático, charmoso e cooperativo.",
                3: "Você aparenta ser sociável, otimista e comunicativo.",
                4: "Você aparenta ser prático, confiável e talvez um pouco rígido.",
                5: "Você aparenta ser aventureiro, magnético e inquieto.",
                6: "Você aparenta ser responsável, protetor e conselheiro.",
                7: "Você aparenta ser reservado, misterioso e intelectual.",
                8: "Você aparenta ser poderoso, bem-sucedido e com controle.",
                9: "Você aparenta ser carismático, compassivo e um líder inspirador.",
                11: "Número Mestre: Você aparenta ser intuitivo, carismático e talvez um pouco tenso ou elétrico.",
                22: "Número Mestre: Você aparenta ser competente, poderoso e capaz de grandes feitos.",
                33: "Número Mestre: Você aparenta ser gentil, compassivo e dedicado a ajudar os outros (raro)."
            },
            energy: {
                 general: "A análise energética mostra a distribuição das vibrações numéricas (1-9) em seu nome completo de nascimento, usando o sistema Pitagórico. Isso revela seus pontos fortes e fracos energéticos inerentes.",
                 lines: "As linhas de energia (a serem implementadas) conectarão esses números para mostrar como diferentes aspectos (físico, mental, espiritual) interagem em sua vida."
            },
            favorableNumbers: {
                description: "Números Favoráveis específicos para seu dia e mês de nascimento, conforme a metodologia de Carlos Rosa. Use-os em situações importantes, números de sorte, datas especiais e decisões relevantes."
            },
            harmonizingNumbers: {
                description: "Números que se harmonizam com o seu dia de nascimento. Estes números trazem energia positiva e podem ser usados para potencializar suas ações e decisões."
            },
            incompatibleNumbers: {
                description: "Números que podem trazer discórdia ou obstáculos. Evite usá-los quando possível em situações importantes. Nota: O número 9 é universal e compatível com todos."
            }
        };

        // --- Funções de Cálculo --- 
        
        function normalizeString(str) {
            if (!str) return '';
            return str.normalize("NFD").replace(/\p{Diacritic}/gu, "").toUpperCase();
        }
        
        function reduceNumber(num, trackSteps = false) {
            let currentNum = num;
            let steps = `${num}`;
            const masterNumbers = [11, 22, 33];

            if (masterNumbers.includes(currentNum)) {
                return trackSteps ? { finalNumber: currentNum, calculationSteps: steps } : currentNum;
            }

            while (currentNum > 9) {
                let digits = currentNum.toString().split('');
                let sum = digits.reduce((acc, digit) => acc + parseInt(digit), 0);
                steps += ` → ${digits.join(' + ')} = ${sum}`;
                currentNum = sum;
                if (masterNumbers.includes(currentNum)) {
                    break;
                }
            }
            return trackSteps ? { finalNumber: currentNum, calculationSteps: steps } : currentNum;
        }

        function calculateDestinyNumber(dob) {
            if (!dob) return null;
            try {
                const [year, month, day] = dob.split('-').map(Number);
                if (!year || !month || !day || year < 1000) throw new Error("Data inválida ou ano incompleto.");

                const reducedDayResult = reduceNumber(day, true);
                const reducedMonthResult = reduceNumber(month, true);
                const reducedYearResult = reduceNumber(year, true);

                const compoundNumber = reducedDayResult.finalNumber + reducedMonthResult.finalNumber + reducedYearResult.finalNumber;
                const finalResult = reduceNumber(compoundNumber, true);

                let calculationSteps = 
                    `Dia (${day}): ${reducedDayResult.calculationSteps.substring(reducedDayResult.calculationSteps.indexOf(' ') + 1 || 0).trim() || day}<br>
                     Mês (${month}): ${reducedMonthResult.calculationSteps.substring(reducedMonthResult.calculationSteps.indexOf(' ') + 1 || 0).trim() || month}<br>
                     Ano (${year}): ${reducedYearResult.calculationSteps.substring(reducedYearResult.calculationSteps.indexOf(' ') + 1 || 0).trim() || year}<br>
                     Soma Reduzida: ${reducedDayResult.finalNumber} + ${reducedMonthResult.finalNumber} + ${reducedYearResult.finalNumber} = ${compoundNumber}`;
                
                if (compoundNumber !== finalResult.finalNumber && ![11, 22, 33].includes(compoundNumber)) {
                     let finalReductionStep = finalResult.calculationSteps.substring(finalResult.calculationSteps.indexOf('→'));
                     calculationSteps += `<br>Redução Final: ${compoundNumber} ${finalReductionStep}`;
                }

                return {
                    finalNumber: finalResult.finalNumber,
                    calculationSteps: calculationSteps,
                    compoundNumber: compoundNumber
                };
            } catch (error) {
                console.error("Erro ao calcular número do destino:", error);
                alert("Formato de data inválido. Use AAAA-MM-DD.");
                return null;
            }
        }

        function calculateNameNumber(name, valueMap, filterType = 'all') {
            if (!name) return null;
            let total = 0;
            let calculation = [];
            const vowels = 'AEIOU';
            
            for (let char of name) {
                let includeChar = false;
                if (filterType === 'all' && valueMap[char]) {
                    includeChar = true;
                } else if (filterType === 'vowels' && vowels.includes(char) && valueMap[char]) {
                    includeChar = true;
                } else if (filterType === 'consonants' && !vowels.includes(char) && valueMap[char]) {
                    includeChar = true;
                }

                if (includeChar) {
                    total += valueMap[char];
                    calculation.push(`${char}(${valueMap[char]})`);
                }
            }

            if (calculation.length === 0) {
                 return null;
            }

            const compoundNumber = total;
            const finalResult = reduceNumber(compoundNumber, true);
            let calculationSteps = calculation.join(' + ');
            
            if (compoundNumber !== finalResult.finalNumber) {
                 let finalReductionStep = finalResult.calculationSteps.substring(finalResult.calculationSteps.indexOf('→'));
                 calculationSteps += `<br>Soma Total = ${compoundNumber} ${finalReductionStep ? finalReductionStep : ''}`;
            } else {
                 calculationSteps += ` = ${compoundNumber}`;
            }

            return {
                finalNumber: finalResult.finalNumber,
                calculationSteps: calculationSteps,
                compoundNumber: compoundNumber
            };
        }

        function calculateExpressionNumber(name) {
            return calculateNameNumber(name, chaldeanValues, 'all');
        }

        function calculateSoulUrgeNumber(name) {
            return calculateNameNumber(name, chaldeanValues, 'vowels');
        }

        function calculatePersonalityNumber(name) {
            return calculateNameNumber(name, chaldeanValues, 'consonants');
        }
        
        function calculateEnergyAnalysis(fullName) {
             if (!fullName) return null;
             const name = normalizeString(fullName);
             let counts = { 1: 0, 2: 0, 3: 0, 4: 0, 5: 0, 6: 0, 7: 0, 8: 0, 9: 0 };
             let totalLetters = 0;

             for (let char of name) {
                 if (pythagoreanValues[char]) {
                     counts[pythagoreanValues[char]]++;
                     totalLetters++;
                 }
             }
             
             if (totalLetters === 0) return null;

             let lineAnalysisText = interpretations.energy.lines || "(Análise das linhas será implementada)";

             return {
                 diagramData: counts,
                 lineAnalysis: lineAnalysisText,
                 interpretation: interpretations.energy.general || "(Interpretação geral da energia será implementada)"
             };
        }

        // FUNÇÃO CORRIGIDA: Calcular números baseados nas tabelas do Carlos Rosa
        function calculateCarlosRosaNumbers(dob) {
            if (!dob) return null;
            
            try {
                const [year, month, day] = dob.split('-').map(Number);
                if (!year || !month || !day) throw new Error("Data inválida.");

                // 1. NÚMEROS FAVORÁVEIS (baseado em dia + mês)
                const favorableKey = `${month}-${day}`;
                const favorable = favorableNumbers[favorableKey] || [];

                // 2. NÚMEROS QUE SE HARMONIZAM (baseado no DIA reduzido a 1-9)
                const dayReduced = reduceNumber(day);
                const harmonizing = harmonizingNumbersByDay[dayReduced] || [];

                // 3. NÚMEROS INCOMPATÍVEIS (baseado no DIA reduzido a 1-9) 
                const incompatible = incompatibleNumbersFixed[dayReduced] || [];

                return {
                    day: day,
                    month: month,
                    dayReduced: dayReduced,
                    favorableNumbers: favorable,
                    harmonizingNumbers: harmonizing,
                    incompatibleNumbers: incompatible
                };
            } catch (error) {
                console.error("Erro ao calcular números Carlos Rosa:", error);
                return null;
            }
        }

        // --- Funções de Exibição --- 
        
        function displayResult(elementId, title, numberData, interpretationData) {
            const container = document.getElementById(elementId);
            if (!container) return;
            
            if (!numberData) {
                container.style.display = 'none';
                container.innerHTML = '';
                return;
            }
            
            let finalInterpretationText = interpretationData[numberData.finalNumber] || "Interpretação para este número final ainda não disponível.";
            let compoundInterpretationText = interpretations.compound[numberData.compoundNumber] || "";

            container.innerHTML = `
                <h3>${title}</h3>
                ${numberData.compoundNumber && numberData.compoundNumber !== numberData.finalNumber ? 
                    `<div class="result-compound-number">Número Composto: ${numberData.compoundNumber}</div>` : ''}
                <div class="result-number">${numberData.finalNumber}</div>
                <div class="result-calculation"><strong>Cálculo:</strong><br>${numberData.calculationSteps}</div>
                <div class="interpretation">
                    ${compoundInterpretationText ? `<h4>Interpretação (Composto ${numberData.compoundNumber}):</h4><p>${compoundInterpretationText}</p><hr style='margin: 10px 0; border-color: rgba(255, 105, 180, 0.2);'>` : ''}
                    <h4>Interpretação (Final ${numberData.finalNumber}):</h4>
                    <p>${finalInterpretationText}</p>
                </div>
            `;
            container.style.display = 'block';
        }
        
         function displayEnergyAnalysis(elementId, analysisData) {
            const container = document.getElementById(elementId);
             if (!container) return;
             
             if (!analysisData || !analysisData.diagramData || Object.values(analysisData.diagramData).every(count => count === 0)) {
                 container.style.display = 'none';
                 container.innerHTML = '';
                 return;
             }
            
            let gridHtml = '<div class="energy-grid">';
            const gridOrder = [1, 2, 3, 4, 5, 6, 7, 8, 9]; 
            for (let num of gridOrder) {
                const count = analysisData.diagramData[num] || 0;
                let circlesHtml = '';
                const maxCircles = 5; 
                for(let i = 0; i < Math.min(count, maxCircles); i++) {
                    circlesHtml += '<span></span>';
                }
                if (count > maxCircles) circlesHtml += '...';
                
                gridHtml += `
                    <div class="energy-cell">
                        <div class="energy-number">${num}</div>
                        <div class="energy-count">(${count}x)</div>
                        <div class="energy-count-circles">${circlesHtml}</div>
                    </div>
                `;
            }
            gridHtml += '</div>';

            container.innerHTML = `
                 <h4>Diagrama de Energia (Frequência 1-9)</h4>
                 <div class="energy-diagram-container">
                     ${gridHtml}
                 </div>
                 <div id="energyInterpretation" class="interpretation">
                     <h4>Análise Energética:</h4>
                     <p>${analysisData.interpretation || 'Análise detalhada será implementada.'}</p>
                 </div>
                 <div id="energyLinesAnalysis" class="interpretation">
                     <h4>Análise das Linhas:</h4>
                     <p>${analysisData.lineAnalysis || 'Análise das linhas será implementada.'}</p>
                 </div>
            `;
             container.style.display = 'block';
        }

        // FUNÇÃO CORRIGIDA: Exibir números do Carlos Rosa
        function displayCarlosRosaNumbers(carlosData) {
            const favorableContainer = document.getElementById('favorableNumbersResult');
            const harmonizingContainer = document.getElementById('harmonizingNumbersResult');
            const incompatibleContainer = document.getElementById('incompatibleNumbersResult');
            const section = document.getElementById('numerologySection');

            if (!carlosData) {
                section.style.display = 'none';
                return;
            }

            // 1. NÚMEROS FAVORÁVEIS
            let favorableHtml = '';
            carlosData.favorableNumbers.forEach(num => {
                favorableHtml += `<div class="favorable-number-item">${num}</div>`;
            });

            favorableContainer.innerHTML = `
                <h4>💛 NÚMEROS FAVORÁVEIS (Dia ${carlosData.day} - Mês ${carlosData.month})</h4>
                <div class="lucky-numbers-grid">${favorableHtml}</div>
                <div class="interpretation">
                    <p>${interpretations.favorableNumbers.description}</p>
                </div>
            `;

            // 2. NÚMEROS QUE SE HARMONIZAM
            let harmonizingHtml = '';
            carlosData.harmonizingNumbers.forEach(num => {
                harmonizingHtml += `<div class="harmonizing-number-item">${num}</div>`;
            });

            harmonizingContainer.innerHTML = `
                <h4>💚 NÚMEROS QUE SE HARMONIZAM (Dia de nascimento: ${carlosData.dayReduced})</h4>
                <div class="lucky-numbers-grid">${harmonizingHtml}</div>
                <div class="interpretation">
                    <p>${interpretations.harmonizingNumbers.description}</p>
                </div>
            `;

            // 3. NÚMEROS INCOMPATÍVEIS
            let incompatibleHtml = '';
            carlosData.incompatibleNumbers.forEach(num => {
                incompatibleHtml += `<div class="incompatible-number-item">${num}</div>`;
            });

            incompatibleContainer.innerHTML = `
                <h4>❌ NÚMEROS INCOMPATÍVEIS (Dia de nascimento: ${carlosData.dayReduced})</h4>
                <div class="lucky-numbers-grid">${incompatibleHtml}</div>
                <div class="interpretation">
                    <p>${interpretations.incompatibleNumbers.description}</p>
                    <p><strong>Nota especial:</strong> O número 9 é universal e compatível com todos os números.</p>
                </div>
            `;

            section.style.display = 'block';
        }

        // --- Função Principal ---
        function calculateAll() {
            const nameInput = document.getElementById('nameInput').value;
            const dobInput = document.getElementById('dobInput').value;
            const fullNameInput = document.getElementById('fullNameInput').value;
            const resultsSection = document.getElementById('resultsSection');
            const nameResultsSection = document.getElementById('nameResults');
            const energySection = document.getElementById('energyAnalysisSection');
            const destinyResultContainer = document.getElementById('destinyResult');
            const numerologySection = document.getElementById('numerologySection');

            if (!nameInput.trim() && !dobInput && !fullNameInput.trim()) {
                alert("Por favor, preencha pelo menos um campo para calcular.");
                resultsSection.style.display = 'none';
                return;
            }

            resultsSection.style.display = 'block';
            
            // Esconder seções inicialmente
            destinyResultContainer.style.display = 'none'; 
            nameResultsSection.style.display = 'none'; 
            energySection.style.display = 'none';
            numerologySection.style.display = 'none';

            // Calcular e exibir Número do Destino
            if (dobInput) {
                const destinyData = calculateDestinyNumber(dobInput);
                if (destinyData) {
                    displayResult('destinyResult', '🌟 Número do Destino (Caminho de Vida)', destinyData, interpretations.destiny);
                } else {
                    destinyResultContainer.innerHTML = '<p style="color: #ff8cc6; text-align: center;">Data de nascimento inválida. Use o formato AAAA-MM-DD.</p>';
                    destinyResultContainer.style.display = 'block';
                }

                // NOVA FUNCIONALIDADE CORRIGIDA: Números do Carlos Rosa
                const carlosData = calculateCarlosRosaNumbers(dobInput);
                displayCarlosRosaNumbers(carlosData);
            }

            // Calcular números do nome
            if (nameInput.trim()) {
                const normalizedName = normalizeString(nameInput);
                document.getElementById('nameUsed').textContent = `"${nameInput}"`;
                nameResultsSection.style.display = 'block';
                
                const expressionData = calculateExpressionNumber(normalizedName);
                const soulData = calculateSoulUrgeNumber(normalizedName);
                const personalityData = calculatePersonalityNumber(normalizedName);
                
                displayResult('expressionResult', '🎯 EXPRESSÃO (Como você age)', expressionData, interpretations.expression);
                displayResult('soulUrgeResult', '💖 Impulso da Alma (O que te motiva)', soulData, interpretations.soul);
                displayResult('personalityResult', '🎭 Eu Exterior (Como te veem)', personalityData, interpretations.personality);
            }

            // Calcular análise energética
            if (fullNameInput.trim()) {
                const normalizedFullName = normalizeString(fullNameInput);
                document.getElementById('fullNameUsed').textContent = `"${fullNameInput}"`;
                const energyData = calculateEnergyAnalysis(normalizedFullName);
                displayEnergyAnalysis('energyAnalysisResult', energyData); 
                energySection.style.display = 'block';
            }
            
            resultsSection.scrollIntoView({ behavior: 'smooth' });
        }

        // --- Inicialização --- 
        function createChaldeanTable() {
            const table = document.getElementById('chaldeanTable');
            if (!table) return;
            table.innerHTML = '';
            const alphabet = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ';
            
            for (let letter of alphabet) {
                if (chaldeanValues[letter]) {
                    const letterBox = document.createElement('div');
                    letterBox.className = 'letter-box';
                    letterBox.innerHTML = `
                        <div class="letter">${letter}</div>
                        <div class="number">${chaldeanValues[letter]}</div>
                    `;
                    table.appendChild(letterBox);
                }
            }
        }
        
        document.addEventListener('DOMContentLoaded', () => {
             createChaldeanTable();
        });

    </script>
</body>
</html>
